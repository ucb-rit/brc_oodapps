# Batch Connect app configuration file
#
# @note Used to define the submitted cluster, title, description, and
#   hard-coded/user-defined attributes that make up this Batch Connect app.

---

cluster: "brc"
cacheable: "false"
form:
  - job_name
  - path
  - modules
  - extra_jupyterlab_args
  - bc_num_hours

attributes:
  extra_jupyterlab_args: '--NotebookApp.default_url=/global/home/users/"${USER}"'

  job_name:
    label: "Name of the Job"
    value: "OOD_Jupyter"

  path:
    label: "Base directory"
    help: "Directory that Jupyter will treat as its root directory and that the file browser will start in. Leave blank to default to your home directory."
    
  modules:
    label: "Software modules"
    help: "List Savio software module(s) to load for use with your Jupyter session, separated by spaces, without quotes. Version numbers are optional. The `anaconda3/2024.02-1-11.4` module is loaded automatically."
    
  bc_num_hours:
    label: "Wall Clock Time"
    help: "The maximum number of hours your Jupyter session will run for. Please delete your session when you are done." 
    value: 1

#  slurm_partition:
#    label: "SLURM Partition"
#    help: "The SLURM Partition in which you want to launch this Jupyter session. For code that is not parallelized (or using only a small number of CPU cores), the HTC partitions are a good choice."
#    widget: select
#    required: true

#  slurm_account:
#    label: "SLURM Account/Project Name"
#    help: "The SLURM account (i.e., the value of the -A or --account flag used when submitting a SLURM job)."
#    widget: select

#  qos_name:
#    label: "SLURM QoS Name"
#    help: "The QoS you want run under. Most FCA users choose savio_normal. Condo users can either use their condo QoS or the low-priority QoS."
#   widget: select

#  num_nodes:
#    label: "Number of Compute Nodes"
#    help: "The number of nodes you want for your Jupyter session."
#    value: 1

 # num_cores:
 #   label: "Number of CPU Cores per Node"
 #   help: "The number of CPU cores you want per node for your Jupyter session."
 #   value: 1

#  gres_value:
#    label: "Number and Type of GPUs"
#    help: "The GRES value in the form 'gpu:x' or 'gpu:type:x' where 'x' is the number of GPUs and (optionally) 'type' is the type of GPU. Remember to specify two CPUs for each GPU in the 'Number of CPU Cores per Node' field."

#  user_email:
#    label: "Email Address (Optional)"
#    help: "Enter your email address if you would like to receive an email when the session starts. Leave blank for no email."

